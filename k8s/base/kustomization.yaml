apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Set a common namespace for all base resources
namespace: craftcloud-system

# 1. Bring in all the sub-components
resources:
  - config/
  - core/manager-api/
  - games/valheim/
  - data/postgres/
  - data/redis/
  - data/qdrant/
  # Add the rest as you build them:
  # - core/dashboard/
  # - core/ai-rag-worker/

# 2. Map the placeholder images to your actual GHCR images from your workflow
images:
  - name: manager-api-image # Matches the placeholder in manager-api/deployment.yaml
    newName: ghcr.io/your-github-username/cloudcraft-manager-api
    newTag: latest
    
  - name: valheim-sidecar-image # Matches the placeholder in games/valheim/deployment.yaml
    newName: ghcr.io/your-github-username/valheim-sidecar
    newTag: latest
    
  # - name: dashboard-image
  #   newName: ghcr.io/your-github-username/cloudcraft-dashboard
  #   newTag: latest