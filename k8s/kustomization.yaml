apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - database.yaml
  - mod-syncer.yaml
  - manager-api.yaml

# 1. Handle the Docker Repository (Replaces ${DOCKER_REPO})
images:
  - name: mod-syncer-image # This is the placeholder name to look for in your manifests
    newName: ghcr.io/your-actual-username/mod-syncer # Your actual registry path
    newTag: latest # You can update this to specific version tags later

# 2. Securely Generate Secrets
secretGenerator:
  - name: db-secrets
    envs:
      - secrets.env # Kustomize will read variables from this local file